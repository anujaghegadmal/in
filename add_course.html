<!DOCTYPE html>
<!--[if IE 9 ]><html class="ie9"><![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>E-Learning App</title>

        <!-- Vendor CSS -->
        <link href="vendors/bower_components/fullcalendar/dist/fullcalendar.min.css" rel="stylesheet">
        <link href="vendors/bower_components/animate.css/animate.min.css" rel="stylesheet">
        <link href="vendors/bower_components/material-design-iconic-font/dist/css/material-design-iconic-font.min.css" rel="stylesheet">
        <link href="vendors/bower_components/malihu-custom-scrollbar-plugin/jquery.mCustomScrollbar.min.css" rel="stylesheet">        
        <link href="vendors/bower_components/google-material-color/dist/palette.css" rel="stylesheet">
        
        <!-- CSS -->
        <link href="css/app.min.1.css" rel="stylesheet">
        <link href="css/app.min.2.css" rel="stylesheet"> 
        
    </head>
    <body data-ma-header="teal">
        <header id="header" class="media">
            <div class="pull-left h-logo">
                <a href="index.html" class="hidden-xs">
                    E-Learning App   
                    <!-- <small>admin extended</small> -->
                </a>
                
                <div class="menu-collapse" data-ma-action="sidebar-open" data-ma-target="main-menu">
                    <div class="mc-wrap">
                        <div class="mcw-line top palette-White bg"></div>
                        <div class="mcw-line center palette-White bg"></div>
                        <div class="mcw-line bottom palette-White bg"></div>
                    </div>
                </div>
            </div>
            
        </header>

        <section id="main">
            

            <aside id="s-main-menu" class="sidebar">
                <div class="smm-header">
                    <i class="zmdi zmdi-long-arrow-left" data-ma-action="sidebar-close"></i>
                </div>

                <ul class="smm-alerts">
                    <li class="" data-user-alert="sua-messages" data-ma-action="sidebar-open" data-ma-target="user-alerts">
                        <i class="zmdi zmdi-account"></i>
                    </li>
                    <span style="color:white;font-size:25px;">Hi, Anuja</span>
                </ul>

                <ul class="main-menu">
                    <li>
                        <a href="index.html"><i class="zmdi zmdi-view-dashboard"></i> Dashboard</a>
                    </li>
                    <li class="sub-menu active">
                        <a href="" data-ma-action="submenu-toggle"><i class="zmdi zmdi-collection-video"></i> Courses</a>

                        <ul>
                            <li class="active"><a href="add_course.html">Add New Course</a></li>
                            <li><a href="pending_courses.html">Pending Courses</a></li>
                            <li><a href="active_courses.html">Active Courses</a></li>
                            <li><a href="deactivated_courses.html">Deactivated Courses</a></li>
                        </ul>
                    </li>
                    <li><a href="my_profile.html"><i class="zmdi zmdi-account-circle"></i> My Profile</a></li>
                    <li><a href="enrollments.html"><i class="zmdi zmdi-accounts-add"></i> Enrollments</a></li>
                </ul>
            </aside>

            <section id="content">
                <div class="card">
                    <div class="row d-flex justify-content-center">
                        <div class="col-lg-6 col-xl-6">
                            <div class="card-header">
                                <h2>Add Course</h2>
                            </div>

                            <div class="card-body card-padding">
                                <form role="form" id="course_info">

                                    <div class="form-group fg-line ">
                                        <!-- <label>Course name <span class="text-danger">*</span></label> -->
                                        <input required type="text" name="course_name" id="c_name" class="form-control input-sm" placeholder="Enter course name">
                                    </div>
                                    <div type="text" class="form-group fg-line">
                                        <textarea required name="course_description" id="description" rows="5" class="form-control input-sm" placeholder="Enter course description"></textarea>
                                    </div>
                                    
                                    <div class="row">
                                        <div class="col-xl-6 col-lg-6">
                                            <div class="form-group fg-line">
                                                <input required type="text" name="duration" id="duration" class="form-control input-sm" placeholder="Enter course duration">
                                            </div>
                                        </div>
                                        <div class="col-xl-6 col-lg-6">
                                            <div class="form-group fg-line">
                                                <input required type="number" name="course_fees" id="fees" class="form-control input-sm" placeholder="Enter course fees">
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="form-group fg-line">
                                        <input required type="hidden" name="course_img_thumbnail" id="f_path" class="form-control input-sm" placeholder="Enter here">
                                        <input type="hidden" name="created_by" value="40">
                                    </div>

                                    <!-- <div class="container">
                                        <p class="f-500 c-black m-b-20">Image Preview</p>

                                        <div class="fileinput fileinput-new" data-provides="fileinput">
                                            <div class="fileinput-preview thumbnail" data-trigger="fileinput"></div>
                                            <div>
                                                <span class="btn palette-Cyan bg waves-effect btn-file">
                                                    <span class="fileinput-new">Add course thumbnail</span>
                                                    <span class="fileinput-exists">Change</span>
                                                    <input type="file" name="...">
                                                </span>
                                                <a href="#" class="btn btn-danger fileinput-exists" data-dismiss="fileinput">Remove</a>
                                            </div>
                                        </div>
                                        <br/>
                                        <br/>
                                        <p><em>Image preview only works in IE10+, FF3.6+, Safari6.0+, Chrome6.0+ and Opera11.1+. In older browsers the filename is shown instead.</em></p>
                                    </div> -->
                                    <div class="form-group fg-line">
                                        <input required type="file" id="f_upload" class="form-control input-sm"   onchange='add_file()' placeholder="Upload your file here">
                                    </div>
                                    <div class="form-group fg-line">
                                        <button type="submit" class="btn btn-primary bg waves-effect">Submit</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

        </section>

        <!-- Page Loader -->
        <!-- <div class="page-loader palette-Teal bg">
            <div class="preloader pl-xl pls-white">
                <svg class="pl-circular" viewBox="25 25 50 50">
                    <circle class="plc-path" cx="50" cy="50" r="20"/>
                </svg>
            </div>
        </div> -->
        
       
        <!-- Javascript Libraries -->
        <script src="vendors/bower_components/jquery/dist/jquery.min.js"></script>
        <script src="vendors/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
        <script src="vendors/bower_components/malihu-custom-scrollbar-plugin/jquery.mCustomScrollbar.concat.min.js"></script>
        <script src="vendors/bower_components/Waves/dist/waves.min.js"></script>
        <script src="vendors/bootstrap-growl/bootstrap-growl.min.js"></script>
        <script src="vendors/bower_components/moment/min/moment.min.js"></script>
        <script src="vendors/bower_components/fullcalendar/dist/fullcalendar.min.js"></script>
        <script src="vendors/bower_components/simpleWeather/jquery.simpleWeather.min.js"></script>
        <script src="vendors/bower_components/salvattore/dist/salvattore.min.js"></script>

        <script src="vendors/bower_components/flot/jquery.flot.js"></script>
        <script src="vendors/bower_components/flot/jquery.flot.resize.js"></script>
        <script src="vendors/bower_components/flot.curvedlines/curvedLines.js"></script>
        <script src="vendors/sparklines/jquery.sparkline.min.js"></script>
        <script src="vendors/bower_components/jquery.easy-pie-chart/dist/jquery.easypiechart.min.js"></script>
        <script src="js/flot-charts/curved-line-chart.js"></script>
        <script src="js/flot-charts/line-chart.js"></script>

        <!-- swal -->
        <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>


        <!-- Placeholder for IE9 -->
        <!--[if IE 9 ]>
        <script src="vendors/bower_components/jquery-placeholder/jquery.placeholder.min.js"></script>
        <![endif]-->

        <script src="js/charts.js"></script>

        <script src="js/functions.js"></script>
        <script src="js/actions.js"></script>
        <script src="js/demo.js"></script>

        <script>
            function add_file(){

                var file_obj = document.getElementById("f_upload");
                console.log(file_obj.files[0]);
                var form_data = new FormData();
                form_data.append("file",file_obj.files[0]);

                $.ajax({
                    url:"http://localhost:8080/courses/upload_thumbnail",
                    type:"POST",
                    data:form_data,
                    "processData": false,
                    "mimeType": "multipart/form-data",
                    "contentType": false,
                    success:function(res){
                        // console.log(typeof(res))
                        res = JSON.parse(res);
                        console.log(res.filename);
                        $("#f_path").val(res.filename);
                    }
                });
            }

            // function add_course(){
            //     var course_details = {
            //         course_name : $("#c_name").val(),
            //         course_description : $("#description").val(),
            //         duration : $("#duration").val(),
            //         course_fees : $("#fees").val(),
            //         course_img_thumbnail : $("#f_path").val(),
            //         created_by : 40
            //     }
            //     // var c_name = 
            //     // var description = 
            //     // var duration = 
            //     // var fees = 
            //     // var f_path = 

            //     console.log(course_details);

            //     $.ajax({
            //             url:"http://localhost:8080/courses/create",
            //             type:"POST",
            //             data:course_details,
            //             success:function(res){
            //                 console.log(res)
            //             }
            //         });
            // }

            $("#course_info").submit(function(e){
                e.preventDefault();
                var info = $("#course_info").serializeArray();
                
                // info.push({
                //     name:"created_by" , value:40
                // })
                swal({
                    title: "Do you want to Add this course?",
                    icon: "info",
                    buttons: true,
                    dangerMode: true,
                })
                .then(function(decision) {
                if (decision) {
                    $.ajax({
                            url:"http://localhost:8080/courses/create",
                            type:"POST",
                            data:info,
                            success:function(res){
                                // console.log(res);
                                swal("Good job!", "Course Added!", "success")
                                .then(function(){
                                    location.reload();
                                });
                            }
                        });
                    console.log(info);
                } else {
                    
                }});

            });
            
            

        </script>

    </body>
  </html>